<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>计算机网络 | racel.researches</title><meta name=keywords content><meta name=description content="few researches will be shared here"><meta name=author content="racel"><link rel=canonical href=https://racel.dev/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/><link crossorigin=anonymous href=/assets/css/stylesheet.4599eadb9eb2ad3d0a8d6827b41a8fda8f2f4af226b63466c09c5fddbc8706b7.css integrity="sha256-RZnq256yrT0KjWgntBqP2o8vSvImtjRmwJxf3byHBrc=" rel="preload stylesheet" as=style><link rel=icon href=https://racel.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://racel.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://racel.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://racel.dev/apple-touch-icon.png><link rel=mask-icon href=https://racel.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://racel.dev/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="计算机网络"><meta property="og:description" content="few researches will be shared here"><meta property="og:type" content="website"><meta property="og:url" content="https://racel.dev/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><meta property="og:site_name" content="racel.researches"><meta name=twitter:card content="summary"><meta name=twitter:title content="计算机网络"><meta name=twitter:description content="few researches will be shared here"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://racel.dev/ accesskey=h title="racel.researches (Alt + H)">racel.researches</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://racel.dev/categories/ title=categories><span>categories</span></a></li><li><a href=https://racel.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://racel.dev/>Home</a>&nbsp;»&nbsp;<a href=https://racel.dev/tags/>Tags</a></div><h1>计算机网络
<a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>哈尔滨商业大学 校园网络优化深入浅出</h2></header><div class=entry-content><p>面对的几个主要问题 学校的学生寝室楼的宽带运营商处于垄断状态，均为中国联通，以80元/月 50Mbps/2终端的价格提供给学生，昂贵且难用。 学校寝室楼的移动流量信号差，速率低，延迟高且有流量限制，属于勉强可以使用的程度。 实际上，针对第二个问题，我曾经尝试过使用 CPE(5G模块为RM520N-GL)，但难以忍受高延迟和低带宽，最后放弃使用。
这样的话，我只能尝试采用学校联通所提供的宽带，想办法尽可能优化。
优化方案 A校区的寝室楼宽带网络提供了光纤入寝，租用宽带的同时也可以抵押 300 元得到校园网定制的中国联通光猫。虽然抵押的光猫有WIFI功能，但是上游下发注册会自动关闭管理后台和WIFI功能。因此，可以外接无线路由器，实现同寝室网络共享。 上述基础的网络共享实际上只使用了一个终端，而通过单线多播可以将多终端的速率叠加，提高带宽。 优化过程 同寝室网络共享 硬件要求 设备 用途 光猫 光信号调解 无线路由器 供终端设备无线连接 我购置了一台红米 RM2100，价格低廉，OpenWRT 固件数量多，但缺点就是内存太小，单设备无法承担单线多播的责任
无线路由器既可以选择付费固件（往往捆绑硬件出售），也可以自行购买，安装自定义固件
但是，安装的固件至少需要有UA2F插件，用于防止被上游上网行为管理系统的多终端检测阻断
这里的路由设置教程遵循OpenWRT系统
路由设置 将路由器的 WAN 口连接到光猫的 LAN 口 如果你知道路由器的默认SSID和密钥，你可以使用终端连接到路由器；如果你不知道，你可以将你有 RJ45 网口的电脑连接到路由器的任意一个 LAN 口。OpenWRT 的默认登录地址即为网关，默认网关地址和管理页面的账户一般在固件下载地址有所提供。这时，登录 OpenWRT 的管理页面。 然后在路由器中将 WAN 口设置为 DHCP 客户端协议。这时，在接口中可以看到WAN已经获取到了 IPv4 地址1 勾选 UA2F 的全部选项并启动 在无线选项中，设置好 SSID 和密钥，并启用。 经过上述的简单设置，此时可以访问校园网的终端登录页面，登录后即可得到公网访问权限。
并且只有在 24H 内没有过连接，登录才会过期。因为，晚上断电，但是早晨路由器自启动就会维持这个登录状态。
单线多播提高带宽 这是最麻烦的一步，因为单线多播带来了很多不兼容性和硬件要求
概括来说就是，使用 OpenWRT 的 MWAN3(负载均衡) 和 Syncdial(多播) 插件来实现单线多播，以及多播后的负载均衡。 但是 MWAN3 因为使用了 iptables 的标记功能，会与同时使用这个功能的 UA2F 发生冲突，因为我们也无法继续使用 UA2F 了。这样，我们只能使用 UA3F2 搭配 Clash 使用了。这要求路由器的内存不能过小，但是我的 RM2100 内存过小，因此我购买了 FriendlyElec R5s 软路由，充当路由器的上游，仅让 RM2100 作为 AP 使用。...</p></div><footer class=entry-footer>2 min&nbsp;·&nbsp;385 words&nbsp;·&nbsp;racel</footer><a class=entry-link aria-label="post link to 哈尔滨商业大学 校园网络优化深入浅出" href=https://racel.dev/posts/hrbcu-network/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>对于所在学校的校园网络了解和研究</h2></header><div class=entry-content><p>情况概述 我校使用的校园网是由Dr.Com 哆点网络提供的鉴权方案，其中通过自建云服务，对接了哆点的Portal登录协议。
网络类型 校内WIFI: 校内基本覆盖了Wifi，连接后自动跳转到 哆点网络验证页面。 寝室有线网络：寝室内有光纤口，学校内仅有的联通营业厅提供光猫抵押服务，通过其抵押的校园网专用光猫（带Wifi功能），连接光纤口后会自动注册下发配置，将管理后台彻底关闭，关闭Wifi功能，仅支持LAN口的DHCP。 验证方式 普通未绑定运营商账号的学生账户，与学校的CAS系统账号密码同步；而绑定了运营商账号的账户，则是普通的学生账号但是添加了2作为后缀区分，密码则是完全相同。
未绑定运营商账号登录时，除了密码之外的参数都是明文，而绑定了运营商账号的登录请求参数 全都是明文。 成功登录后，校园网会以客户端IP为 唯一标识 用以作为判别终端数量的一个基础标准。
校园网针对终端限制进行的检测措施 User-Agent 检测 于 2024年第一学期 勘测发现，校园网新增了 UA检测 用以进一步对多终端共享网络这一行为进行限制。检测到多终端后，便会进行 5分钟的连接阻断。
User-Agent是HTTP请求的一个请求头，其中包含了浏览器信息和设备信息等，可以用于区分不同终端。应该注意到的是，User-Agent在HTTP请求中是 明文 的，在HTTPS的第一个请求中也是明文的。
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 便是一个正常的User-Agent内容。
你也可以通过专门的UA检测网站来查看你当前的User-Agent。
尚未发现的检测措施 目前我校仅仅部署了UA检测，尚未发现其他检测措施，但也了解到了一些其他的检测措施。
基于 IPv4 数据包包头内的 TTL 字段的检测
DPI (Deep Packet Inspection) 深度包检测技术
基于 IPv4 数据包包头内的 Identification 字段的检测
基于网络协议栈时钟偏移的检测技术
Flash Cookie 检测技术
来自 sunbk2011
校园网优化方案 对抗终端限制 首先我购买了一个路由器用以伪装成一个终端，连接寝室光猫使用，从而达成网络共享的目标。我购买的是红米 AC21002，价格低廉，可玩性高，使用了集成了UA2F的OpenWRT固件3。
学校目前仅仅部署了User-Agent检测，这也是最常见的一个检测，其中有多种方案来对抗。
UA2F4 为多种设备提供了User-Agent修改方案，其使用iptables对流量进行判别修改，会与其他使用connmark的程序发生冲突，例如mwan3负载均衡。 UA3F5 是一个SOCK5代理服务器，它通过接管通过SOCK5客户端转发来的流量，对HTTP数据包进行修改。但是针对性能较弱的路由器，可能会出现内存不足等问题。 可以直接使用代理工具，将流量重定向到代理服务器，这一过程是加密的，因此也可以用于绕过UA检测。 多终端速率叠加 我校校园网以高出市场价几倍的资费进行出售，实在是可恶。一般购买的是 50M / 2个终端 套餐，因此可以考虑通过单线多播，实现50M速率的叠加。...</p></div><footer class=entry-footer>1 min&nbsp;·&nbsp;123 words&nbsp;·&nbsp;racel</footer><a class=entry-link aria-label="post link to 对于所在学校的校园网络了解和研究" href=https://racel.dev/posts/campus-network/></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://racel.dev/>racel.researches</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>